<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Sebastian Sauer Blog</title>
<meta name="description" content="Describe this nonsense.">


<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sebastiansauer.github.io/images/farb3.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="Describe this nonsense.">
<meta name="twitter:creator" content="@sauer_sebastian">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="https://sebastiansauer.github.io/page3/">
<meta property="og:site_name" content="Sebastian Sauer Blog">





<link rel="canonical" href="https://sebastiansauer.github.io/page3/">
<link href="https://sebastiansauer.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Sebastian Sauer Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://sebastiansauer.github.io/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://sebastiansauer.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://sebastiansauer.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://sebastiansauer.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://sebastiansauer.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://sebastiansauer.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://sebastiansauer.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://sebastiansauer.github.io/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="https://sebastiansauer.github.io/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="https://sebastiansauer.github.io/images/ses_201102_xsmall.jpg" alt="Sebastian Sauer photo" class="author-photo">
					<h4>Sebastian Sauer</h4>
					<p>Professor at FOM University of Applied Sciences. Thinker on own peril.</p>
				</li>
				<li><a href="https://sebastiansauer.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:ssauer@posteo.de"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/sauer_sebastian"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="https://linkedin.com/in/https://www.linkedin.com/in/dr-sebastian-sauer-4791762"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/sebastiansauer"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				<li>
					<a href="http://stackoverflow.com/users/4434263/sebastian-sauer"><i class="fa fa-fw fa-stack-exchange"></i> Stackexchange</a>
				</li>
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="https://sebastiansauer.github.io/posts/">All Posts</a></li>
				<li><a href="https://sebastiansauer.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="">Laurenz Sauer</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="https://sebastiansauer.github.io/images/farb3.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Sebastian Sauer Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-10-16T00:00:00-04:00"><a href="https://sebastiansauer.github.io/NAs-with-dplyr/">October 16, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~2 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/NAs-with-dplyr/" rel="bookmark" title="Checking for NA with dplyr" itemprop="url">Checking for NA with dplyr</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Often, we want to check for missing values (<code class="highlighter-rouge">NA</code>s). There are of course many ways to do so. <code class="highlighter-rouge">dplyr</code> provides a quite nice one.</p>

<p>First, let’s load some data:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">extra_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"https://raw.github.com/sebastiansauer/Daten_Unterricht/master/extra.csv"</span><span class="w">

</span><span class="n">extra_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">extra_file</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>Note that <code class="highlighter-rouge">extra</code> is a data frame consisting of survey items regarding extraversion and related behavior.</p>

<p>In case the dataframe is quite largish (many columns) it is helpful to have some quick way. Here, we have 25 columns. That is not enormous, but ok, let’s stick with that for now.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">

</span><span class="n">extra_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select_if</span><span class="p">(</span><span class="k">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">any</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">summarise_each</span><span class="p">(</span><span class="n">funs</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">.</span><span class="p">))))</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">extra_NA</span><span class="w">
</span></code></pre>
</div>

<p>So, what have we done?
The <code class="highlighter-rouge">select_if</code> part choses any column where <code class="highlighter-rouge">is.na</code> is true (<code class="highlighter-rouge">TRUE</code>). Then we take those columns and for each of them, we sum up (<code class="highlighter-rouge">summarise_each</code>) the number of NAs. Note that each column is summarized to a single value, that’s why we use <code class="highlighter-rouge">summarise</code>. And finally, the resulting data frame (dplyr always aims at giving back a data frame) is stored in a new variable for further processing.</p>

<p>Now, let’s see:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># library(pander)  # for printing tables in markdown
</span><span class="n">library</span><span class="p">(</span><span class="n">knitr</span><span class="p">)</span><span class="w">

</span><span class="n">kable</span><span class="p">(</span><span class="n">extra_NA</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">code</th>
      <th style="text-align: right">i6</th>
      <th style="text-align: right">i9</th>
      <th style="text-align: right">i12</th>
      <th style="text-align: right">Facebook</th>
      <th style="text-align: right">Kater</th>
      <th style="text-align: right">Alter</th>
      <th style="text-align: right">Geschlecht</th>
      <th style="text-align: right">extro_one_item</th>
      <th style="text-align: right">Minuten</th>
      <th style="text-align: right">Messe</th>
      <th style="text-align: right">Party</th>
      <th style="text-align: right">Kunden</th>
      <th style="text-align: right">Beschreibung</th>
      <th style="text-align: right">Aussagen</th>
      <th style="text-align: right">i26</th>
      <th style="text-align: right">extra_mw</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">82</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">73</td>
      <td style="text-align: right">12</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">37</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">16</td>
      <td style="text-align: right">49</td>
      <td style="text-align: right">117</td>
      <td style="text-align: right">121</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">3</td>
    </tr>
  </tbody>
</table>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-10-15T00:00:00-04:00"><a href="https://sebastiansauer.github.io/indexing-in-R/">October 15, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~12 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/indexing-in-R/" rel="bookmark" title="Multiple ways to subsetting data frames in R" itemprop="url">Multiple ways to subsetting data frames in R</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Subsetting a data frame is an essential and frequently performed task. Here, some basic ideas are presented.</p>

<p>Get some data first.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## 'data.frame':	32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">head</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w">  </span><span class="c1"># for shorter output
</span><span class="n">mtcars</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
</code></pre>
</div>

<h2 id="one-addressing-dataframe-as-list-vector-1-dim-structure">One: Addressing dataframe as list (vector, 1-dim structure)</h2>
<p>Data frames can be understood/addressed as lists, ie., as some type of vectors. Vectors have one dimension. Thus, we can access/subset with one index only (one dimension). For example <code class="highlighter-rouge">mtcars[1]</code> selects the first element (ie., column) of <code class="highlighter-rouge">mtcars</code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg
## Mazda RX4         21.0
## Mazda RX4 Wag     21.0
## Datsun 710        22.8
## Hornet 4 Drive    21.4
## Hornet Sportabout 18.7
## Valiant           18.1
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="s2">"mpg"</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg
## Mazda RX4         21.0
## Mazda RX4 Wag     21.0
## Datsun 710        22.8
## Hornet 4 Drive    21.4
## Hornet Sportabout 18.7
## Valiant           18.1
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="s2">"mpg"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cyl"</span><span class="p">)]</span><span class="w">  
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl
## Mazda RX4         21.0   6
## Mazda RX4 Wag     21.0   6
## Datsun 710        22.8   4
## Hornet 4 Drive    21.4   6
## Hornet Sportabout 18.7   8
## Valiant           18.1   6
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl disp
## Mazda RX4         21.0   6  160
## Mazda RX4 Wag     21.0   6  160
## Datsun 710        22.8   4  108
## Hornet 4 Drive    21.4   6  258
## Hornet Sportabout 18.7   8  360
## Valiant           18.1   6  225
</code></pre>
</div>

<p>Note that data frames are vectors (lists) technically, where the vectors are the columns and the columns possess names. Thus we can address the columns by their names. Of course, we can select (address/index/subset) more than one element (column) using the <code class="highlighter-rouge">c()</code> function.</p>

<p>Besides names, we can address the elements by their number: type a positive integer to subset the respective element. <code class="highlighter-rouge">c</code> can be used here too.</p>

<p>Note that the <code class="highlighter-rouge">:</code> (colon) operator is a short hand for <code class="highlighter-rouge">c(from_this_column_to_that column)</code>.</p>

<p>Similarly to addressing the names of the data frames using brackets <code class="highlighter-rouge">[]</code>, we can use the Dollar <code class="highlighter-rouge">$</code> operator:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="o">$</span><span class="n">mpg</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## [1] 21.0 21.0 22.8 21.4 18.7 18.1
</code></pre>
</div>

<p>Whatever comes after the <code class="highlighter-rouge">$</code> is understood by R as the name (without quotation marks) of the column within that data frame. <code class="highlighter-rouge">$</code> is a shorthand for <code class="highlighter-rouge">[[]]</code> (but not exactly the same; see <a href="http://adv-r.had.co.nz/Subsetting.html">here</a> for an excellent overview).</p>

<h2 id="two-addressing-dataframe-as-a-matrix-2-dim-structure-2-dim-matrix">Two: Addressing dataframe as a matrix (2-dim-structure, 2-dim-matrix)</h2>

<p>As data frames can also be addressed as rectangular, two-dimensional matrices, we may subset specific elements using a x-y-coordinate scheme where in R matrices the row is addressed first, and the column second, eg., <code class="highlighter-rouge">mtcars(1,2)</code> would be <em>first</em> line of <em>second</em> column.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## [1] 21
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##           mpg cyl
## Mazda RX4  21   6
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##           mpg cyl disp
## Mazda RX4  21   6  160
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##           mpg cyl disp
## Mazda RX4  21   6  160
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl disp
## Mazda RX4         21.0   6  160
## Mazda RX4 Wag     21.0   6  160
## Datsun 710        22.8   4  108
## Hornet 4 Drive    21.4   6  258
## Hornet Sportabout 18.7   8  360
## Valiant           18.1   6  225
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"mpg"</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## [1] 21
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"mpg"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cyl"</span><span class="p">)]</span><span class="w">  
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##           mpg cyl
## Mazda RX4  21   6
</code></pre>
</div>

<p>Again, the <code class="highlighter-rouge">c()</code> operator may be used to group several rows or columns. Columns may again addressed by their names (row names are  unusual). The <code class="highlighter-rouge">:</code> colon operator is allowed, too.</p>

<h2 id="three-logical-subsetting-in-dataframes">Three: Logical subsetting in dataframes</h2>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">,</span><span class="w"> </span><span class="nb">T</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl carb
## Mazda RX4         21.0   6    4
## Mazda RX4 Wag     21.0   6    4
## Datsun 710        22.8   4    1
## Hornet 4 Drive    21.4   6    1
## Hornet Sportabout 18.7   8    2
## Valiant           18.1   6    1
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl  hp drat  qsec vs gear carb
## Mazda RX4         21.0   6 110 3.90 16.46  0    4    4
## Mazda RX4 Wag     21.0   6 110 3.90 17.02  0    4    4
## Datsun 710        22.8   4  93 3.85 18.61  1    4    1
## Hornet 4 Drive    21.4   6 110 3.08 19.44  1    3    1
## Hornet Sportabout 18.7   8 175 3.15 17.02  0    3    2
## Valiant           18.1   6 105 2.76 20.22  1    3    1
</code></pre>
</div>

<p>In the first example above, the columns #1, #2, #and #11 are selected, because their position is indexed as <code class="highlighter-rouge">TRUE</code> (or <code class="highlighter-rouge">T</code>).</p>

<p>Note that if you supply less elements than the length of the objects (eg., here 11 columns/elements), R will recycle your elements until the full length of the element is met (here: TTF-TTF-TTF-TT).</p>

<p>Again, the data frame can be addressed either as a list (1-dim), or as a 2-dim matrix. See here for an example using logical indexing and addressing the data frame as a 2-dim matrix:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w"> </span><span class="nb">F</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                    mpg cyl  hp drat  qsec vs gear carb
## Mazda RX4         21.0   6 110 3.90 16.46  0    4    4
## Mazda RX4 Wag     21.0   6 110 3.90 17.02  0    4    4
## Hornet 4 Drive    21.4   6 110 3.08 19.44  1    3    1
## Hornet Sportabout 18.7   8 175 3.15 17.02  0    3    2
</code></pre>
</div>

<p>Actually, the logical subsetting is quite powerful. We can use a predicate function, ie., a function delivering a logial state (<code class="highlighter-rouge">TRUE</code> or <code class="highlighter-rouge">FALSE</code>) within the subsetting:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="p">[</span><span class="n">mtcars</span><span class="o">$</span><span class="n">cyl</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">)]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##                 mpg cyl
## Mazda RX4      21.0   6
## Mazda RX4 Wag  21.0   6
## Hornet 4 Drive 21.4   6
## Valiant        18.1   6
</code></pre>
</div>

<p>Here, we declared that we only want <em>rows</em> for which the following condition is <code class="highlighter-rouge">TRUE</code>: <code class="highlighter-rouge">mtcars$cyl == 6</code>. (And only cols 1 and 2.)</p>

<h2 id="final-words">Final words</h2>

<p>Subsetting in R is an essential task. It is also not so easy, as many slightly different variants exist. Here, only some ideas were presented. A much broader are excellently presented by Hadley Wickham <a href="http://adv-r.had.co.nz/Subsetting.html">here</a>.</p>

<p>Besides that subsettting using base R should be well understood, it may be more comfortable to use functions such as <code class="highlighter-rouge">select</code> from <code class="highlighter-rouge">dplyr</code>.</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-10-12T00:00:00-04:00"><a href="https://sebastiansauer.github.io/Download-from-Github/">October 12, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/Download-from-Github/" rel="bookmark" title="How to read Github files into R easily" itemprop="url">How to read Github files into R easily</a></h1>
    
  </header>
  <div class="entry-content">
    <h2 id="downloading-a-folder-repository-from-github-as-a-whole">Downloading a folder (repository) from Github as a whole</h2>
<p>The most direct way to get data from Github to your computer/ into R, is to download the repository. That is, click the big green button:</p>

<p><img src="https://sebastiansauer.github.io/images/2016-10-12/repo_example.png" width="700" /></p>

<hr />

<p>The big, green button saying “Clone or download”, click it and choose “download zip”.</p>

<p><img src="https://sebastiansauer.github.io/images/2016-10-12/download_repo.png" alt="" /></p>

<p>Of course, for those using <a href="https://www.google.de/webhp?sourceid=chrome-instant&amp;rlz=1C5CHFA_enDE701DE701&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=git">Git</a> and <a href="https://github.com/">Github</a>, it would be appropriate to clone the repository. And, although appearing more advanced, cloning has the definitive advantage that you’ll enjoy the whole of the Github features. In fact, the whole purpose of Github is to provide a history of the file(s), so the purpose is not really served if one just downloads the most recent snapshot. But anyhow, that depends on you own will.</p>

<p>Note that “repository” can be thought of as “folder” or “project”.</p>

<p>Once downloaded, you <strong>need</strong> to <a href="https://en.wikipedia.org/wiki/Zip_(file_format)">unzip</a> the folder. Unzipping means to “extract” or “unpack” the file/folder. On many machines, this can be accomplished by right clicking the icon and choosing something like “extract here”.</p>

<p>Once extracted, just navigate to the folder and open whatever file you are inclined to.</p>

<h2 id="downloading-individual-files-from-github">Downloading individual files from Github</h2>

<p>In case you do not want to download the whole repository, individual files can be downloaded and parsed to R quite easily:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">  </span><span class="c1"># for read_csv
</span><span class="n">library</span><span class="p">(</span><span class="n">knitr</span><span class="p">)</span><span class="w">  </span><span class="c1"># for kable
</span><span class="n">myfile</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"https://raw.github.com/sebastiansauer/Daten_Unterricht/master/Affairs.csv"</span><span class="w">

</span><span class="n">Affairs</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">myfile</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Warning: Missing column names filled in: 'X1' [1]
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Parsed with column specification:
## cols(
##   X1 = col_integer(),
##   affairs = col_integer(),
##   gender = col_character(),
##   age = col_double(),
##   yearsmarried = col_double(),
##   children = col_character(),
##   religiousness = col_integer(),
##   education = col_integer(),
##   occupation = col_integer(),
##   rating = col_integer()
## )
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">kable</span><span class="p">(</span><span class="n">head</span><span class="p">(</span><span class="n">Affairs</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<table>
  <thead>
    <tr>
      <th style="text-align: right">X1</th>
      <th style="text-align: right">affairs</th>
      <th style="text-align: left">gender</th>
      <th style="text-align: right">age</th>
      <th style="text-align: right">yearsmarried</th>
      <th style="text-align: left">children</th>
      <th style="text-align: right">religiousness</th>
      <th style="text-align: right">education</th>
      <th style="text-align: right">occupation</th>
      <th style="text-align: right">rating</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">1</td>
      <td style="text-align: right">0</td>
      <td style="text-align: left">male</td>
      <td style="text-align: right">37</td>
      <td style="text-align: right">10.00</td>
      <td style="text-align: left">no</td>
      <td style="text-align: right">3</td>
      <td style="text-align: right">18</td>
      <td style="text-align: right">7</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: right">2</td>
      <td style="text-align: right">0</td>
      <td style="text-align: left">female</td>
      <td style="text-align: right">27</td>
      <td style="text-align: right">4.00</td>
      <td style="text-align: left">no</td>
      <td style="text-align: right">4</td>
      <td style="text-align: right">14</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: right">3</td>
      <td style="text-align: right">0</td>
      <td style="text-align: left">female</td>
      <td style="text-align: right">32</td>
      <td style="text-align: right">15.00</td>
      <td style="text-align: left">yes</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">12</td>
      <td style="text-align: right">1</td>
      <td style="text-align: right">4</td>
    </tr>
    <tr>
      <td style="text-align: right">4</td>
      <td style="text-align: right">0</td>
      <td style="text-align: left">male</td>
      <td style="text-align: right">57</td>
      <td style="text-align: right">15.00</td>
      <td style="text-align: left">yes</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">18</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">5</td>
    </tr>
    <tr>
      <td style="text-align: right">5</td>
      <td style="text-align: right">0</td>
      <td style="text-align: left">male</td>
      <td style="text-align: right">22</td>
      <td style="text-align: right">0.75</td>
      <td style="text-align: left">no</td>
      <td style="text-align: right">2</td>
      <td style="text-align: right">17</td>
      <td style="text-align: right">6</td>
      <td style="text-align: right">3</td>
    </tr>
    <tr>
      <td style="text-align: right">6</td>
      <td style="text-align: right">0</td>
      <td style="text-align: left">female</td>
      <td style="text-align: right">32</td>
      <td style="text-align: right">1.50</td>
      <td style="text-align: left">no</td>
      <td style="text-align: right">2</td>
      <td style="text-align: right">17</td>
      <td style="text-align: right">5</td>
      <td style="text-align: right">5</td>
    </tr>
  </tbody>
</table>

<p>Let’s quickly deconstruct the url above from Github. In general, we need to write:</p>

<p><code class="highlighter-rouge">https://raw.github.com/user/repository/branch/file.name</code>.</p>

<p>In many cases, the branch will be “master”. You can easily find out about that one the page of the repo you wanna download:</p>

<p><img src="https://sebastiansauer.github.io/images/2016-10-12/branch.png" alt="" /></p>

<p>I’ve noticed that unzipping a repository from Github (and downloading a zip file) can cause confusion, so it might be easier to provide a code bit as shown above.</p>

<p>BTW: <code class="highlighter-rouge">read.csv</code> should work equally.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-10-05T00:00:00-04:00"><a href="https://sebastiansauer.github.io/template-onepager/">October 05, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~4 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/template-onepager/" rel="bookmark" title="Simple (R-)Markdown template for 'Onepager-reports' etc. " itemprop="url">Simple (R-)Markdown template for 'Onepager-reports' etc. </a></h1>
    
  </header>
  <div class="entry-content">
    <p>In my role as a teacher, I (have to) write a lot of marking feedback reports. My university provides a website to facilitate the process, that’s great. I have also been writing my reports with Pages, Word, or friends. But somewhat cooler, more attractive, and more reproducible would be using (a markup language such as) Markdown. Basically, that’s easy, but it would be of help to have a template that makes up a nice and nicely formatted report, like this:</p>

<p><img src="https://sebastiansauer.github.io/images/2016-10-05/Gutachten_Boilerplate.jpg" alt="" /></p>

<p>Download this pdf file <a href="https://sebastiansauer.github.io/download/Gutachten_Boilerplate.pdf">here</a>. Here is the <a href="https://sebastiansauer.github.io/download/Gutachten_Boilerplate.Rmd">source file</a>. Credit goes to the <a href="http://pandoc.org">Pandoc</a> team; I based my template on their’s.</p>

<p>So how to do it?</p>

<p>First and foremorst, write your report using <a href="https://daringfireball.net/projects/markdown/">Markdown</a>, and convert it to HTML oder Latex-PDF using <a href="http://pandoc.org">Pandoc</a>. <a href="https://www.rstudio.com">Rstudio</a> provides nice introduction, eg., <a href="http://rmarkdown.rstudio.com/lesson-1.html">here</a> or <a href="https://blog.rstudio.org/2014/06/18/r-markdown-v2/">here</a>.</p>

<p>Next, tell your Markdown document to use your individual stylesheet, i.e, template. Note that I focus here on PDF output.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>---
subtitle: "A general theory ..."
title: "Feedback report to the assignment"
output:
  pdf_document:
    template: template_feedback.latex   
---

</code></pre>
</div>

<p>You have to put that bit above in the <a href="http://rmarkdown.rstudio.com/html_document_format.html">YAML header</a> of your markdown document (right at the top of your document), see the <a href="https://sebastiansauer.github.io/download/Gutachten_Boilerplate.Rmd">source file</a> for details. And then, you just write your Markdown report in plain English (or whatever language…).</p>

<p>However, where the music actually plays is the <a href="https://sebastiansauer.github.io/download/template_feedback.latex">latex template</a>, which is being used in the Markdown document (via the YAML header). The idea is that in the Latex file, we define some variables (such as “author” or “title”) which then can be used in the markdown file. Markdown, that is YAML, is able to address those variables defined in the Latex template. In this example, the variables defined include:</p>

<ul>
  <li>author</li>
  <li>title</li>
  <li>subtitle</li>
  <li>“thanks to” (I use this field as some “freeride” variable)</li>
  <li>date</li>
</ul>

<p>The body (main part) of the onepage example above basically looks like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>
# Obedience to the teacher
- Lorem ipsum dolor sit amet, consetetur sadipscing elitr, 
- sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, 
- sed diam voluptua. 
...


# Statistical abuses
- Lorem ipsum dolor sit amet, consetetur sadipscing elitr,
...


# Contribution to meaning of live
- Lorem ipsum dolor sit amet, consetetur sadipscing elitr, 
(...)

</code></pre>
</div>

<p>En plus, the style sheet - being based on Pandoc’s stylesheet - allows for quite a number of more format-based adjustments such as language, geometry of the paper, section-numbering etc. See the excellent Pandoc help for details.</p>

<p>Enjoy!</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-09-29T00:00:00-04:00"><a href="https://sebastiansauer.github.io/purrr-effsize/">September 29, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~23 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/purrr-effsize/" rel="bookmark" title="Using purrr to build a data frame of vectors (eg., from effect size statistics)" itemprop="url">Using purrr to build a data frame of vectors (eg., from effect size statistics)</a></h1>
    
  </header>
  <div class="entry-content">
    <p>I just tried to accomplish the following with R: Compute effect sizes for a variable between two groups. Actually, not one numeric variable but many. And compute not only one measure of effect size but several (d, lower/upper CI, CLES,…).</p>

<p>So how to do that?</p>

<p>First, let’s load some data and some (tidyverse and effect size) packages:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">knitr</span><span class="o">::</span><span class="n">opts_chunk</span><span class="o">$</span><span class="n">set</span><span class="p">(</span><span class="n">echo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">purrr</span><span class="p">)</span><span class="w">  
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">broom</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tibble</span><span class="p">)</span><span class="w">  

</span><span class="n">library</span><span class="p">(</span><span class="n">compute.es</span><span class="p">)</span><span class="w">
</span><span class="n">data</span><span class="p">(</span><span class="n">Fair</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Ecdat"</span><span class="p">)</span><span class="w"> </span><span class="c1"># extramarital affairs dataset
</span><span class="n">glimpse</span><span class="p">(</span><span class="n">Fair</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Observations: 601
## Variables: 9
## $ sex        &lt;fctr&gt; male, female, female, male, male, female, female, ...
## $ age        &lt;dbl&gt; 37, 27, 32, 57, 22, 32, 22, 57, 32, 22, 37, 27, 47,...
## $ ym         &lt;dbl&gt; 10.00, 4.00, 15.00, 15.00, 0.75, 1.50, 0.75, 15.00,...
## $ child      &lt;fctr&gt; no, no, yes, yes, no, no, no, yes, yes, no, yes, y...
## $ religious  &lt;int&gt; 3, 4, 1, 5, 2, 2, 2, 2, 4, 4, 2, 4, 5, 2, 4, 1, 2, ...
## $ education  &lt;dbl&gt; 18, 14, 12, 18, 17, 17, 12, 14, 16, 14, 20, 18, 17,...
## $ occupation &lt;int&gt; 7, 6, 1, 6, 6, 5, 1, 4, 1, 4, 7, 6, 6, 5, 5, 5, 4, ...
## $ rate       &lt;int&gt; 4, 4, 4, 5, 3, 5, 3, 4, 2, 5, 2, 4, 4, 4, 4, 5, 3, ...
## $ nbaffairs  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
</code></pre>
</div>

<p>Extract the numeric variables:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select_if</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Fair_num</span><span class="w">
</span><span class="n">Fair_num</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## [1] "age"        "ym"         "religious"  "education"  "occupation"
## [6] "rate"       "nbaffairs"
</code></pre>
</div>

<p>Now suppose we want to compare men and women (people do that all the time). First, we do a t-test for each numeric variable (and save the results):</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select</span><span class="p">(</span><span class="n">one_of</span><span class="p">(</span><span class="n">Fair_num</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">t.test</span><span class="p">(</span><span class="n">.</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">Fair</span><span class="o">$</span><span class="n">sex</span><span class="p">))</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Fair_t_test</span><span class="w">
</span></code></pre>
</div>

<p>The resulting variable is a list of t-test-results (each a list again). Let’s have a look at one of the t-test results:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair_t_test</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## 
## 	Welch Two Sample t-test
## 
## data:  . by Fair$sex
## t = -4.7285, df = 575.26, p-value = 2.848e-06
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -5.014417 -2.071219
## sample estimates:
## mean in group female   mean in group male 
##             30.80159             34.34441
</code></pre>
</div>

<p>That’s the <code class="highlighter-rouge">str</code>ucture of a t-test result object (one element of Fair_t_test
):</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">Fair_t_test</span><span class="p">[[</span><span class="m">1</span><span class="p">]])</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## List of 9
##  $ statistic  : Named num -4.73
##   ..- attr(*, "names")= chr "t"
##  $ parameter  : Named num 575
##   ..- attr(*, "names")= chr "df"
##  $ p.value    : num 2.85e-06
##  $ conf.int   : atomic [1:2] -5.01 -2.07
##   ..- attr(*, "conf.level")= num 0.95
##  $ estimate   : Named num [1:2] 30.8 34.3
##   ..- attr(*, "names")= chr [1:2] "mean in group female" "mean in group male"
##  $ null.value : Named num 0
##   ..- attr(*, "names")= chr "difference in means"
##  $ alternative: chr "two.sided"
##  $ method     : chr "Welch Two Sample t-test"
##  $ data.name  : chr ". by Fair$sex"
##  - attr(*, "class")= chr "htest"
</code></pre>
</div>

<p>So we see that t-value itself can be accessed with eg., <code class="highlighter-rouge">Fair_t_test[[1]]$statistic</code>. The t-value is now fed into a function that computes effect sizes.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair_t_test</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">tes</span><span class="p">(</span><span class="n">.</span><span class="o">$</span><span class="n">statistic</span><span class="p">,</span><span class="w">
          </span><span class="n">n</span><span class="m">.1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">filter</span><span class="p">(</span><span class="n">Fair</span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"female"</span><span class="p">)),</span><span class="w">
          </span><span class="n">n</span><span class="m">.2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">filter</span><span class="p">(</span><span class="n">Fair</span><span class="p">,</span><span class="w"> </span><span class="n">sex</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"male"</span><span class="p">))))</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Fair_effsize</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Mean Differences ES: 
##  
##  d [ 95 %CI] = -0.39 [ -0.55 , -0.22 ] 
##   var(d) = 0.01 
##   p-value(d) = 0 
##   U3(d) = 34.97 % 
##   CLES(d) = 39.24 % 
##   Cliff's Delta = -0.22 
##  
##  g [ 95 %CI] = -0.39 [ -0.55 , -0.22 ] 
##   var(g) = 0.01 
##   p-value(g) = 0 
##   U3(g) = 34.99 % 
##   CLES(g) = 39.25 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.19 [ 0.11 , 0.27 ] 
##   var(r) = 0 
##   p-value(r) = 0 
##  
##  z [ 95 %CI] = 0.19 [ 0.11 , 0.27 ] 
##   var(z) = 0 
##   p-value(z) = 0 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 0.5 [ 0.37 , 0.67 ] 
##   p-value(OR) = 0 
##  
##  Log OR [ 95 %CI] = -0.7 [ -0.99 , -0.41 ] 
##   var(lOR) = 0.02 
##   p-value(Log OR) = 0 
##  
##  Other: 
##  
##  NNT = -11.08 
##  Total N = 601Mean Differences ES: 
##  
##  d [ 95 %CI] = -0.06 [ -0.22 , 0.1 ] 
##   var(d) = 0.01 
##   p-value(d) = 0.46 
##   U3(d) = 47.58 % 
##   CLES(d) = 48.29 % 
##   Cliff's Delta = -0.03 
##  
##  g [ 95 %CI] = -0.06 [ -0.22 , 0.1 ] 
##   var(g) = 0.01 
##   p-value(g) = 0.46 
##   U3(g) = 47.59 % 
##   CLES(g) = 48.29 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.03 [ -0.05 , 0.11 ] 
##   var(r) = 0 
##   p-value(r) = 0.46 
##  
##  z [ 95 %CI] = 0.03 [ -0.05 , 0.11 ] 
##   var(z) = 0 
##   p-value(z) = 0.46 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 0.9 [ 0.67 , 1.2 ] 
##   p-value(OR) = 0.46 
##  
##  Log OR [ 95 %CI] = -0.11 [ -0.4 , 0.18 ] 
##   var(lOR) = 0.02 
##   p-value(Log OR) = 0.46 
##  
##  Other: 
##  
##  NNT = -60.47 
##  Total N = 601Mean Differences ES: 
##  
##  d [ 95 %CI] = -0.02 [ -0.18 , 0.15 ] 
##   var(d) = 0.01 
##   p-value(d) = 0.85 
##   U3(d) = 49.39 % 
##   CLES(d) = 49.57 % 
##   Cliff's Delta = -0.01 
##  
##  g [ 95 %CI] = -0.02 [ -0.18 , 0.14 ] 
##   var(g) = 0.01 
##   p-value(g) = 0.85 
##   U3(g) = 49.39 % 
##   CLES(g) = 49.57 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.01 [ -0.07 , 0.09 ] 
##   var(r) = 0 
##   p-value(r) = 0.85 
##  
##  z [ 95 %CI] = 0.01 [ -0.07 , 0.09 ] 
##   var(z) = 0 
##   p-value(z) = 0.85 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 0.97 [ 0.73 , 1.3 ] 
##   p-value(OR) = 0.85 
##  
##  Log OR [ 95 %CI] = -0.03 [ -0.32 , 0.26 ] 
##   var(lOR) = 0.02 
##   p-value(Log OR) = 0.85 
##  
##  Other: 
##  
##  NNT = -234.86 
##  Total N = 601Mean Differences ES: 
##  
##  d [ 95 %CI] = -0.86 [ -1.03 , -0.69 ] 
##   var(d) = 0.01 
##   p-value(d) = 0 
##   U3(d) = 19.52 % 
##   CLES(d) = 27.18 % 
##   Cliff's Delta = -0.46 
##  
##  g [ 95 %CI] = -0.86 [ -1.03 , -0.69 ] 
##   var(g) = 0.01 
##   p-value(g) = 0 
##   U3(g) = 19.54 % 
##   CLES(g) = 27.2 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.39 [ 0.32 , 0.46 ] 
##   var(r) = 0 
##   p-value(r) = 0 
##  
##  z [ 95 %CI] = 0.42 [ 0.34 , 0.5 ] 
##   var(z) = 0 
##   p-value(z) = 0 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 0.21 [ 0.16 , 0.29 ] 
##   p-value(OR) = 0 
##  
##  Log OR [ 95 %CI] = -1.56 [ -1.86 , -1.25 ] 
##   var(lOR) = 0.02 
##   p-value(Log OR) = 0 
##  
##  Other: 
##  
##  NNT = -6.43 
##  Total N = 601Mean Differences ES: 
##  
##  d [ 95 %CI] = -1.08 [ -1.25 , -0.91 ] 
##   var(d) = 0.01 
##   p-value(d) = 0 
##   U3(d) = 13.95 % 
##   CLES(d) = 22.2 % 
##   Cliff's Delta = -0.56 
##  
##  g [ 95 %CI] = -1.08 [ -1.25 , -0.91 ] 
##   var(g) = 0.01 
##   p-value(g) = 0 
##   U3(g) = 13.98 % 
##   CLES(g) = 22.22 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.48 [ 0.41 , 0.54 ] 
##   var(r) = 0 
##   p-value(r) = 0 
##  
##  z [ 95 %CI] = 0.52 [ 0.44 , 0.6 ] 
##   var(z) = 0 
##   p-value(z) = 0 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 0.14 [ 0.1 , 0.19 ] 
##   p-value(OR) = 0 
##  
##  Log OR [ 95 %CI] = -1.96 [ -2.28 , -1.65 ] 
##   var(lOR) = 0.03 
##   p-value(Log OR) = 0 
##  
##  Other: 
##  
##  NNT = -5.79 
##  Total N = 601Mean Differences ES: 
##  
##  d [ 95 %CI] = 0.02 [ -0.15 , 0.18 ] 
##   var(d) = 0.01 
##   p-value(d) = 0.85 
##   U3(d) = 50.6 % 
##   CLES(d) = 50.43 % 
##   Cliff's Delta = 0.01 
##  
##  g [ 95 %CI] = 0.02 [ -0.15 , 0.18 ] 
##   var(g) = 0.01 
##   p-value(g) = 0.85 
##   U3(g) = 50.6 % 
##   CLES(g) = 50.43 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.01 [ -0.07 , 0.09 ] 
##   var(r) = 0 
##   p-value(r) = 0.85 
##  
##  z [ 95 %CI] = 0.01 [ -0.07 , 0.09 ] 
##   var(z) = 0 
##   p-value(z) = 0.85 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 1.03 [ 0.77 , 1.37 ] 
##   p-value(OR) = 0.85 
##  
##  Log OR [ 95 %CI] = 0.03 [ -0.26 , 0.32 ] 
##   var(lOR) = 0.02 
##   p-value(Log OR) = 0.85 
##  
##  Other: 
##  
##  NNT = 235.02 
##  Total N = 601Mean Differences ES: 
##  
##  d [ 95 %CI] = -0.02 [ -0.18 , 0.14 ] 
##   var(d) = 0.01 
##   p-value(d) = 0.77 
##   U3(d) = 49.06 % 
##   CLES(d) = 49.34 % 
##   Cliff's Delta = -0.01 
##  
##  g [ 95 %CI] = -0.02 [ -0.18 , 0.14 ] 
##   var(g) = 0.01 
##   p-value(g) = 0.77 
##   U3(g) = 49.07 % 
##   CLES(g) = 49.34 % 
##  
##  Correlation ES: 
##  
##  r [ 95 %CI] = 0.01 [ -0.07 , 0.09 ] 
##   var(r) = 0 
##   p-value(r) = 0.77 
##  
##  z [ 95 %CI] = 0.01 [ -0.07 , 0.09 ] 
##   var(z) = 0 
##   p-value(z) = 0.77 
##  
##  Odds Ratio ES: 
##  
##  OR [ 95 %CI] = 0.96 [ 0.72 , 1.28 ] 
##   p-value(OR) = 0.77 
##  
##  Log OR [ 95 %CI] = -0.04 [ -0.33 , 0.25 ] 
##   var(lOR) = 0.02 
##   p-value(Log OR) = 0.77 
##  
##  Other: 
##  
##  NNT = -153.72 
##  Total N = 601
</code></pre>
</div>

<p>The resulting object (<code class="highlighter-rouge">Fair_effsize</code>) is a list where each list element is the output of the <code class="highlighter-rouge">tes</code> function. Let’s have a look at one of these list elements:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair_effsize</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##   N.total n.1 n.2     d var.d   l.d   u.d  U3.d  cl.d cliffs.d pval.d
## t     601 315 286 -0.39  0.01 -0.55 -0.22 34.97 39.24    -0.22      0
##       g var.g   l.g   u.g  U3.g  cl.g pval.g    r var.r  l.r  u.r pval.r
## t -0.39  0.01 -0.55 -0.22 34.99 39.25      0 0.19     0 0.11 0.27      0
##   fisher.z var.z  l.z  u.z  OR l.or u.or pval.or  lOR l.lor u.lor pval.lor
## t     0.19     0 0.11 0.27 0.5 0.37 0.67       0 -0.7 -0.99 -0.41        0
##      NNT
## t -11.08
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">str</span><span class="p">(</span><span class="n">Fair_effsize</span><span class="p">[[</span><span class="m">1</span><span class="p">]])</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## 'data.frame':	1 obs. of  36 variables:
##  $ N.total : num 601
##  $ n.1     : num 315
##  $ n.2     : num 286
##  $ d       : num -0.39
##  $ var.d   : num 0.01
##  $ l.d     : num -0.55
##  $ u.d     : num -0.22
##  $ U3.d    : num 35
##  $ cl.d    : num 39.2
##  $ cliffs.d: num -0.22
##  $ pval.d  : num 0
##  $ g       : num -0.39
##  $ var.g   : num 0.01
##  $ l.g     : num -0.55
##  $ u.g     : num -0.22
##  $ U3.g    : num 35
##  $ cl.g    : num 39.2
##  $ pval.g  : num 0
##  $ r       : num 0.19
##  $ var.r   : num 0
##  $ l.r     : num 0.11
##  $ u.r     : num 0.27
##  $ pval.r  : num 0
##  $ fisher.z: num 0.19
##  $ var.z   : num 0
##  $ l.z     : num 0.11
##  $ u.z     : num 0.27
##  $ OR      : num 0.5
##  $ l.or    : num 0.37
##  $ u.or    : num 0.67
##  $ pval.or : num 0
##  $ lOR     : num -0.7
##  $ l.lor   : num -0.99
##  $ u.lor   : num -0.41
##  $ pval.lor: num 0
##  $ NNT     : num -11.1
</code></pre>
</div>

<p>The element itself is a data frame with n=1 and p=36. So we could nicely row-bind these 36 rows into one data frame. How to do that?</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair_effsize</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="w"> </span><span class="o">~</span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">as.data.frame</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Fair_effsize_df</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">Fair_effsize_df</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##            age     ym religious education occupation   rate nbaffairs
## N.total 601.00 601.00    601.00    601.00     601.00 601.00    601.00
## n.1     315.00 315.00    315.00    315.00     315.00 315.00    315.00
## n.2     286.00 286.00    286.00    286.00     286.00 286.00    286.00
## d        -0.39  -0.06     -0.02     -0.86      -1.08   0.02     -0.02
## var.d     0.01   0.01      0.01      0.01       0.01   0.01      0.01
## l.d      -0.55  -0.22     -0.18     -1.03      -1.25  -0.15     -0.18
</code></pre>
</div>

<p>What we did here is:</p>

<ol>
  <li>Take each list element and then… (that was <code class="highlighter-rouge">map</code>)</li>
  <li>bind these elements row-wise together, ie,. “underneath” each other (<code class="highlighter-rouge">rbind</code>). <code class="highlighter-rouge">do.call</code> is only a helper that allows to hand over to <code class="highlighter-rouge">rbind</code> a bunch of rows.</li>
  <li>Then convert this element, still a list, to a data frame (not much changes in effect)</li>
</ol>

<p>Finally, let’s convert the row names to a column:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">Fair_effsize_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rownames_to_column</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Fair_effsize_df</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">Fair_effsize_df</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##   rowname    age     ym religious education occupation   rate nbaffairs
## 1 N.total 601.00 601.00    601.00    601.00     601.00 601.00    601.00
## 2     n.1 315.00 315.00    315.00    315.00     315.00 315.00    315.00
## 3     n.2 286.00 286.00    286.00    286.00     286.00 286.00    286.00
## 4       d  -0.39  -0.06     -0.02     -0.86      -1.08   0.02     -0.02
## 5   var.d   0.01   0.01      0.01      0.01       0.01   0.01      0.01
## 6     l.d  -0.55  -0.22     -0.18     -1.03      -1.25  -0.15     -0.18
</code></pre>
</div>

<p>A bit of a ride, but we got there!</p>

<p>And I am sure, better ways are out there. Let me know!</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="https://sebastiansauer.github.io/page2/" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="https://sebastiansauer.github.io">1</a></li>
    

    
    

    
    
    

    
      
        
        
        
        <li><a href="https://sebastiansauer.github.io/page2/">2</a></li>
      
    
      
        <li><strong class="current-page">3</strong></li>
      
    
      
        
        
        
        <li><a href="https://sebastiansauer.github.io/page4/">4</a></li>
      
    
      
        
        
        
        <li><a href="https://sebastiansauer.github.io/page5/">5</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="https://sebastiansauer.github.io/page9/">9</a></li>
    

    
    
      <li><a href="https://sebastiansauer.github.io/page4/" class="btn">Next</a></li>
    
  </ul>
</div>

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Sebastian Sauer. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://sebastiansauer.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://sebastiansauer.github.io/assets/js/scripts.min.js"></script>

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



          

</body>
</html>