<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Sebastian Sauer Blog</title>
<meta name="description" content="Describe this nonsense.">


<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://sebastiansauer.github.io/images/farb3.jpg">

<meta name="twitter:title" content="Latest Posts">
<meta name="twitter:description" content="Describe this nonsense.">
<meta name="twitter:creator" content="@sauer_sebastian">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="https://sebastiansauer.github.io/page2/">
<meta property="og:site_name" content="Sebastian Sauer Blog">





<link rel="canonical" href="https://sebastiansauer.github.io/page2/">
<link href="https://sebastiansauer.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Sebastian Sauer Blog Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://sebastiansauer.github.io/assets/css/main.css">
<!-- Webfonts -->
<link href="//fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="https://sebastiansauer.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://sebastiansauer.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://sebastiansauer.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://sebastiansauer.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://sebastiansauer.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://sebastiansauer.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://sebastiansauer.github.io/images/apple-touch-icon-144x144-precomposed.png">



</head>

<body id="post-index" class="feature">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="https://sebastiansauer.github.io/">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="https://sebastiansauer.github.io/images/ses_201102_xsmall.jpg" alt="Sebastian Sauer photo" class="author-photo">
					<h4>Sebastian Sauer</h4>
					<p>Professor at FOM University of Applied Sciences. Thinker on own peril.</p>
				</li>
				<li><a href="https://sebastiansauer.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li>
				<li>
					<a href="mailto:ssauer@posteo.de"><i class="fa fa-fw fa-envelope"></i> Email</a>
				</li>
				<li>
					<a href="https://twitter.com/sauer_sebastian"><i class="fa fa-fw fa-twitter"></i> Twitter</a>
				</li>
				
				
				<li>
					<a href="https://linkedin.com/in/https://www.linkedin.com/in/dr-sebastian-sauer-4791762"><i class="fa fa-fw fa-linkedin"></i> LinkedIn</a>
				</li>
				<li>
					<a href="https://github.com/sebastiansauer"><i class="fa fa-fw fa-github"></i> GitHub</a>
				</li>
				<li>
					<a href="http://stackoverflow.com/users/4434263/sebastian-sauer"><i class="fa fa-fw fa-stack-exchange"></i> Stackexchange</a>
				</li>
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="https://sebastiansauer.github.io/posts/">All Posts</a></li>
				<li><a href="https://sebastiansauer.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  <div class="image-credit">Image source: <a href="">Laurenz Sauer</a></div><!-- /.image-credit -->
  
    <div class="entry-image">
      <img src="https://sebastiansauer.github.io/images/farb3.jpg" alt="Latest Posts">
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Sebastian Sauer Blog</h1>
      <h2>Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main">
  
<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-11-08T00:00:00-05:00"><a href="https://sebastiansauer.github.io/stochastic_independence/">November 08, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~12 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/stochastic_independence/" rel="bookmark" title="Some reflections on stochastic independence" itemprop="url">Some reflections on stochastic independence</a></h1>
    
  </header>
  <div class="entry-content">
    <p>We are often interested in the question whether two variables are “associated”, “correlated” (I mean the normal English term) or “dependent”. What exactly, or rather in normal words, does that mean? Let’s look at some easy case.</p>

<p>NOTE: The example has been updated to reflect a more tangible and sensible scenario (find the old one in the previous commit at Github).</p>

<h1 id="titanic-data">Titanic data</h1>

<p>For example, let’s look at survival rates of the Titanic disaster, to see whether the probability of survival (event A) depends on the whether you embarked for 1st class (event B).</p>

<p>Let’s load the data and have a look at them.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="p">(</span><span class="n">titanic_train</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"titanic"</span><span class="p">)</span><span class="w">

</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">  </span><span class="c1"># plotting and data mungling
</span><span class="n">library</span><span class="p">(</span><span class="n">pander</span><span class="p">)</span><span class="w">  </span><span class="c1"># for markdown tables
</span><span class="w">
</span><span class="n">data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">titanic_train</span><span class="w">
</span></code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">glimpse</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Observations: 891
## Variables: 12
## $ PassengerId &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,...
## $ Survived    &lt;int&gt; 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0,...
## $ Pclass      &lt;int&gt; 3, 1, 3, 1, 3, 3, 1, 3, 3, 2, 3, 1, 3, 3, 3, 2, 3,...
## $ Name        &lt;chr&gt; "Braund, Mr. Owen Harris", "Cumings, Mrs. John Bra...
## $ Sex         &lt;chr&gt; "male", "female", "female", "female", "male", "mal...
## $ Age         &lt;dbl&gt; 22, 38, 26, 35, 35, NA, 54, 2, 27, 14, 4, 58, 20, ...
## $ SibSp       &lt;int&gt; 1, 1, 0, 1, 0, 0, 0, 3, 0, 1, 1, 0, 0, 1, 0, 0, 4,...
## $ Parch       &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 1, 2, 0, 1, 0, 0, 5, 0, 0, 1,...
## $ Ticket      &lt;chr&gt; "A/5 21171", "PC 17599", "STON/O2. 3101282", "1138...
## $ Fare        &lt;dbl&gt; 7.2500, 71.2833, 7.9250, 53.1000, 8.0500, 8.4583, ...
## $ Cabin       &lt;chr&gt; "", "C85", "", "C123", "", "", "E46", "", "", "", ...
## $ Embarked    &lt;chr&gt; "S", "C", "S", "S", "S", "Q", "S", "S", "S", "C", ...
</code></pre>
</div>

<p>Look at the package description for some details on the variables.</p>

<p>Let’s look at the survival rate in general, that is to say to probability of A - irrespective of the the class (1st class or not 1st class).</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Survived</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Number of Survivals"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.5</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-08/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3" /></p>

<p>Maybe that’s a better plot:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Survived</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Number of Survivals"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-08/unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4" /></p>

<p>The exact figures are for the survivals are:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Survived</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## # A tibble: 2 × 2
##   Survived     n
##      &lt;int&gt; &lt;int&gt;
## 1        0   549
## 2        1   342
</code></pre>
</div>

<p>The exact figures are for the classes (1st vs. other) are:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">Pclass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"1st"</span><span class="p">,</span><span class="w"> </span><span class="s2">"not_1st"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## # A tibble: 2 × 2
##   Pclass_bin     n
##        &lt;chr&gt; &lt;int&gt;
## 1        1st   216
## 2    not_1st   675
</code></pre>
</div>

<p>… and the number of passengers per class (1st class vs. other classes) is:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">Pclass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"1st"</span><span class="p">,</span><span class="w"> </span><span class="s2">"not_1st"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Survived</span><span class="p">,</span><span class="w"> </span><span class="n">Pclass_bin</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Source: local data frame [4 x 3]
## Groups: Survived [?]
## 
##   Survived Pclass_bin     n
##      &lt;int&gt;      &lt;chr&gt; &lt;int&gt;
## 1        0        1st    80
## 2        0    not_1st   469
## 3        1        1st   136
## 4        1    not_1st   206
</code></pre>
</div>

<p>So, that was warming up. Let’s see what the probability (percentage) of survival is for both 1st class and non-first class.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">Pclass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"1st"</span><span class="p">,</span><span class="w"> </span><span class="s2">"not_1st"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="p">),</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Survived</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Probability of Survivals given Passenager class"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">theme</span><span class="p">(</span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.5</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-08/unnamed-chunk-8-1.png" alt="plot of chunk unnamed-chunk-8" /></p>

<p>We easily conclude that the probability of survival <em>is</em> associated with passenger class. The probability of survival (event A) <em>given</em> 1st class (event B) is considerably higher than the probability of A given non-B (event B is “not 1st class”).</p>

<p>The exact numbers are:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">Pclass</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="s2">"1st"</span><span class="p">,</span><span class="w"> </span><span class="s2">"not_1st"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Pclass_bin</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">data_2</span><span class="w">

</span><span class="n">data_2</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## Source: local data frame [4 x 3]
## Groups: Pclass_bin [?]
## 
##   Pclass_bin Survived     n
##        &lt;chr&gt;    &lt;int&gt; &lt;int&gt;
## 1        1st        0    80
## 2        1st        1   136
## 3    not_1st        0   469
## 4    not_1st        1   206
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">pandoc.table</span><span class="p">(</span><span class="n">data_2</span><span class="p">,</span><span class="w"> </span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"rmarkdown"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Pclass_bin</th>
      <th style="text-align: center">Survived</th>
      <th style="text-align: center">n</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1st</td>
      <td style="text-align: center">0</td>
      <td style="text-align: center">80</td>
    </tr>
    <tr>
      <td style="text-align: center">1st</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">136</td>
    </tr>
    <tr>
      <td style="text-align: center">not_1st</td>
      <td style="text-align: center">0</td>
      <td style="text-align: center">469</td>
    </tr>
    <tr>
      <td style="text-align: center">not_1st</td>
      <td style="text-align: center">1</td>
      <td style="text-align: center">206</td>
    </tr>
  </tbody>
</table>

<h1 id="general-notion-of-stochastic-independence">General notion of stochastic independence</h1>
<p>A typical definition of stochastic (or statistic) independence is this:</p>

<p><script type="math/tex">p(A|B) = p(A)</script>
That means in plain English, that the probability of A (survival) <em>given</em> B (1st class) is equal to A <em>irrespective</em> of B, that means irrespective of B is the case or non-B is the case. In short, that would mean the survival probability is equal in both cases (B or non-B).</p>

<p>In math-speak:</p>

<script type="math/tex; mode=display">p(A|B) = p(A) = p(A|nonB) = p(A|B \cup nonB)</script>

<p>Here, the “cup” <script type="math/tex">\cup</script> means “OR”.</p>

<p>It than follows that if
<script type="math/tex">p(A|B) = p(A|nonB)</script>
we deduce</p>

<script type="math/tex; mode=display">p(A|B) - p(A|nonB) = 0</script>

<p>Or more verbose in our Titanic example:</p>

<table>
  <tbody>
    <tr>
      <td>$$p(Survival</td>
      <td>1stClass) = p(Survival</td>
      <td>1stclass) OR non1stCalss}) = p(Survial</td>
      <td>non1stClass)$$.</td>
    </tr>
  </tbody>
</table>

<p>In words, whether someone survives is independent from the question of his or her passenger class: Survival probability is the the same in 1st class and in the other classes (“non 1st class”).</p>

<p>Let’s look at the data of our example:</p>

<script type="math/tex; mode=display">p(A) = 342 / (549+342) = 0.38 \\
p(nonA) = 549 / (549+342) = 0.62 \\

p(B) = 216 / (216 + 675) = 0.24 \\

p(nonB) =  675 / (216 + 675) = 0.76 \\

p(A|B) = 136 / (80+136) = 0.63 \\

p(nonA|B) = 80 / (80+136) = 0.37 \\

p(A|nonB) = 206 / (206+469) = 0.31 \\

p(nonA|nonB) = 469 / (206+469) = 0.69</script>

<p>In R:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">p_A</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">342</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">549+342</span><span class="p">)</span><span class="w">
</span><span class="n">p_nonA</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">549</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">549+342</span><span class="p">)</span><span class="w">

</span><span class="n">p_B</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">216</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">216</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">675</span><span class="p">)</span><span class="w">
</span><span class="n">p_nonB</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">549</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">549+342</span><span class="p">)</span><span class="w">


</span><span class="n">p_B</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">216</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">216</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">675</span><span class="p">)</span><span class="w">
</span><span class="n">p_nonB</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">675</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">216</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">675</span><span class="p">)</span><span class="w">
</span><span class="n">p_A_given_B</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">136</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">80+136</span><span class="p">)</span><span class="w">
</span><span class="n">P_nonA_given_B</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">80</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">80+136</span><span class="p">)</span><span class="w">

</span><span class="n">p_A_given_nonB</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">206</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">206+469</span><span class="p">)</span><span class="w">
</span><span class="n">p_nonA_given_nonB</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">469</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="m">206+469</span><span class="p">)</span><span class="w">



</span><span class="n">p_diff</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">p_A_given_B</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">p_A_given_nonB</span><span class="w">
</span><span class="n">p_diff</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## [1] 0.3244444
</code></pre>
</div>

<p>The difference <code class="highlighter-rouge">p(A|B) - p(A|nonB)</code> is not zero. Actually it is quite far away: If you are in 1st, your survival rate is 32% higher if you were not in 1st class. Quite strong. However, note that this last step is subjective, no job for statistics.</p>

<p>Finally, let’s look for two variable which are not associated. For example: Shoe size (of adults) and their bank account number.</p>

<p>In our dataset, what about port of Embarkement: Southampton vs. not Southampton and Survival rate.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Embarked_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">Embarked</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w"> </span><span class="s2">"not_S"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select</span><span class="p">(</span><span class="n">Embarked_bin</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Embarked_bin</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Embarked_bin</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Survived</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-08/unnamed-chunk-12-1.png" alt="plot of chunk unnamed-chunk-12" /></p>

<p>Hm, appears to be related/associated/dependent/correlated.</p>

<p>Maybe better plot like this:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Embarked_bin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">Embarked</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w"> </span><span class="s2">"S"</span><span class="p">,</span><span class="w"> </span><span class="s2">"not_S"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select</span><span class="p">(</span><span class="n">Embarked_bin</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Embarked_bin</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Embarked_bin</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Survived</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fill"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-08/unnamed-chunk-13-1.png" alt="plot of chunk unnamed-chunk-13" /></p>

<p>Ah, yes, there is some dependence.</p>

<p>Ok, last try, this is should be a save win: Whether fare is an odd number (eg., 7 Pound) and survival are related.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">Fare_odd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="nf">round</span><span class="p">(</span><span class="n">Fare</span><span class="p">)</span><span class="w"> </span><span class="o">%%</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"even"</span><span class="p">,</span><span class="w"> </span><span class="s2">"odd"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select</span><span class="p">(</span><span class="n">Fare_odd</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">Fare_odd</span><span class="p">,</span><span class="w"> </span><span class="n">Survived</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Fare_odd</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">Survived</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"fill"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-08/unnamed-chunk-14-1.png" alt="plot of chunk unnamed-chunk-14" /></p>

<p>Well, nearly equal, approximately independent, or independent enough for me (as said, that’s subjective).</p>

<h1 id="concluding-remarks">Concluding remarks</h1>
<p>Of course there are numerous ways to “measure” the strength of assocation. Odds ratios, for example, a popular choice. The reason why I like or presented this version <script type="math/tex">p(A|B)-p(A|nonB)</script> is that I find it intuitively appealing. In my teaching I found that the Odds Ratio was somewhat more difficult to grasp at first.</p>

<p>Also note that we where looking at discrete events, not continuous.</p>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-11-04T00:00:00-04:00"><a href="https://sebastiansauer.github.io/bind_list_to_dataframe_lm/">November 04, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~9 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/bind_list_to_dataframe_lm/" rel="bookmark" title="Bind lists to data frame for aggregating linear models results" itemprop="url">Bind lists to data frame for aggregating linear models results</a></h1>
    
  </header>
  <div class="entry-content">
    <p>I found myself doing the following: I had a bunch of predictors, one (numeric) outcome, and wanted to run I simple regression for each of the predictors. Having a bunch of model results, I would like to have them bundled in one data frame.</p>

<p>So, here is one way to do it.</p>

<p>First, load some data.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## 'data.frame':	32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: num  4 4 1 1 2 1 4 2 2 4 ...
</code></pre>
</div>

<p>Say, <code class="highlighter-rouge">mpg</code> is our outcome/ criterion. The rest of the variables are predictors.</p>

<p>Then, some packages.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">purrr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tibble</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">broom</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">scales</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>For illustration, let’s run a regression with each and all of the predictors as a preliminary step.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">lm</span><span class="p">(</span><span class="n">mpg</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mtcars</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">glance</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##   r.squared adj.r.squared    sigma statistic      p.value df    logLik
## 1 0.8690158     0.8066423 2.650197  13.93246 3.793152e-07 11 -69.85491
##        AIC      BIC deviance df.residual
## 1 163.7098 181.2986 147.4944          21
</code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">lm</span><span class="p">(</span><span class="n">mpg</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mtcars</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">tidy</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##           term    estimate   std.error  statistic    p.value
## 1  (Intercept) 12.30337416 18.71788443  0.6573058 0.51812440
## 2          cyl -0.11144048  1.04502336 -0.1066392 0.91608738
## 3         disp  0.01333524  0.01785750  0.7467585 0.46348865
## 4           hp -0.02148212  0.02176858 -0.9868407 0.33495531
## 5         drat  0.78711097  1.63537307  0.4813036 0.63527790
## 6           wt -3.71530393  1.89441430 -1.9611887 0.06325215
## 7         qsec  0.82104075  0.73084480  1.1234133 0.27394127
## 8           vs  0.31776281  2.10450861  0.1509915 0.88142347
## 9           am  2.52022689  2.05665055  1.2254035 0.23398971
## 10        gear  0.65541302  1.49325996  0.4389142 0.66520643
## 11        carb -0.19941925  0.82875250 -0.2406258 0.81217871
</code></pre>
</div>

<p>Of interest, no p-value is below .05.</p>

<p>Now come the main part, let’s run multiple regression and then combine the results.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">mpg</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">lm</span><span class="p">(</span><span class="n">mtcars</span><span class="o">$</span><span class="n">mpg</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mtcars</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="s2">"coefficients"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind.data.frame</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rownames_to_column</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">as_tibble</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">setNames</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"predictor"</span><span class="p">,</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w"> </span><span class="s2">"p"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">arrange</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="n">str_detect</span><span class="p">(</span><span class="n">predictor</span><span class="p">,</span><span class="w"> </span><span class="s2">"(Intercept)"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">predictor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_sub</span><span class="p">(</span><span class="n">predictor</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_length</span><span class="p">(</span><span class="n">predictor</span><span class="p">)</span><span class="m">-3</span><span class="p">))</span><span class="w">
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## # A tibble: 10 × 5
##    predictor           b          SE         t            p
##        &lt;chr&gt;       &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
## 1         wt -5.34447157 0.559101045 -9.559044 1.293959e-10
## 2        cyl -2.87579014 0.322408883 -8.919699 6.112687e-10
## 3       disp -0.04121512 0.004711833 -8.747152 9.380327e-10
## 4         hp -0.06822828 0.010119304 -6.742389 1.787835e-07
## 5       drat  7.67823260 1.506705108  5.096042 1.776240e-05
## 6         vs  7.94047619 1.632370025  4.864385 3.415937e-05
## 7         am  7.24493927 1.764421632  4.106127 2.850207e-04
## 8       carb -2.05571870 0.568545640 -3.615750 1.084446e-03
## 9       gear  3.92333333 1.308130699  2.999191 5.400948e-03
## 10      qsec  1.41212484 0.559210130  2.525213 1.708199e-02
</code></pre>
</div>

<p>Some explanation:</p>

<ul>
  <li>l2: deselect the outcome variable, so that we can address “all” variables in the next lines</li>
  <li>l3: map each list element to <code class="highlighter-rouge">lm</code>; <code class="highlighter-rouge">.x</code> is a placeholder for all the list elements (here predictors)</li>
  <li>l4: now get the summary of each lm. More specifically, we have a number of lm models, which are stored as list elements. Now we apply the <code class="highlighter-rouge">summary</code> function to each of those list elements (lm results).</li>
  <li>l5: address (extract) the <code class="highlighter-rouge">coefficients</code> subelement from each list element</li>
  <li>l6: rownames should be their own column</li>
  <li>l7: tibbles are nic</li>
  <li>l8: make the col names typing-friendly</li>
  <li>l9: filter those lines, where <code class="highlighter-rouge">predictor</code> is <em>not</em> equal to “(Intercept)”.</li>
  <li>l10: change the values of <code class="highlighter-rouge">predictor</code> such that the strange end part “..x” is removed</li>
</ul>

<p>Puh, quite some hassle.</p>

<p>Now, for completeness, let’s look at the $R^2$.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">mpg</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">lm</span><span class="p">(</span><span class="n">mtcars</span><span class="o">$</span><span class="n">mpg</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mtcars</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="n">glance</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind.data.frame</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rownames_to_column</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">as_tibble</span><span class="w"> 
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>## # A tibble: 10 × 12
##    rowname r.squared adj.r.squared    sigma statistic      p.value    df
##      &lt;chr&gt;     &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt; &lt;int&gt;
## 1      cyl 0.7261800     0.7170527 3.205902 79.561028 6.112687e-10     2
## 2     disp 0.7183433     0.7089548 3.251454 76.512660 9.380327e-10     2
## 3       hp 0.6024373     0.5891853 3.862962 45.459803 1.787835e-07     2
## 4     drat 0.4639952     0.4461283 4.485409 25.969645 1.776240e-05     2
## 5       wt 0.7528328     0.7445939 3.045882 91.375325 1.293959e-10     2
## 6     qsec 0.1752963     0.1478062 5.563738  6.376702 1.708199e-02     2
## 7       vs 0.4409477     0.4223126 4.580827 23.662241 3.415937e-05     2
## 8       am 0.3597989     0.3384589 4.902029 16.860279 2.850207e-04     2
## 9     gear 0.2306734     0.2050292 5.373695  8.995144 5.400948e-03     2
## 10    carb 0.3035184     0.2803024 5.112961 13.073646 1.084446e-03     2
## # ... with 5 more variables: logLik &lt;dbl&gt;, AIC &lt;dbl&gt;, BIC &lt;dbl&gt;,
## #   deviance &lt;dbl&gt;, df.residual &lt;int&gt;
</code></pre>
</div>

<p>Ok, I admit, I like plotting, particularly with <code class="highlighter-rouge">ggplot2</code>.</p>

<p>First, the $R^2$ for all models:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">mpg</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">lm</span><span class="p">(</span><span class="n">mtcars</span><span class="o">$</span><span class="n">mpg</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mtcars</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="n">glance</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind.data.frame</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rownames_to_column</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">as_tibble</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">rowname</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">adj.r.squared</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">adj.r.squared</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-04/p1-1.png" alt="plot of chunk p1" /></p>

<p>Last, the p-values of each predictor (OMG).</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">mtcars</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="n">mpg</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">lm</span><span class="p">(</span><span class="n">mtcars</span><span class="o">$</span><span class="n">mpg</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mtcars</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="s2">"coefficients"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind.data.frame</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rownames_to_column</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">as_tibble</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">setNames</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"predictor"</span><span class="p">,</span><span class="w"> </span><span class="s2">"b"</span><span class="p">,</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">,</span><span class="w"> </span><span class="s2">"t"</span><span class="p">,</span><span class="w"> </span><span class="s2">"p"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">arrange</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="n">str_detect</span><span class="p">(</span><span class="n">predictor</span><span class="p">,</span><span class="w"> </span><span class="s2">"(Intercept)"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">predictor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_sub</span><span class="p">(</span><span class="n">predictor</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_length</span><span class="p">(</span><span class="n">predictor</span><span class="p">)</span><span class="m">-3</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">predictor</span><span class="p">,</span><span class="n">p</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.05</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"red"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-04/p2-1.png" alt="plot of chunk p2" /></p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-11-03T00:00:00-04:00"><a href="https://sebastiansauer.github.io/percentage_plot_ggplot2_V2/">November 03, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~1 minute
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/percentage_plot_ggplot2_V2/" rel="bookmark" title="How to plot a 'percentage plot' with ggplot2" itemprop="url">How to plot a 'percentage plot' with ggplot2</a></h1>
    
  </header>
  <div class="entry-content">
    <p>At times it is convenient to draw a frequency bar plot; at times we prefer not the bare frequencies but the proportions or the percentages per category. There are lots of ways doing so; let’s look at some <code class="highlighter-rouge">ggplot2</code> ways.</p>

<p>First, let’s load some data.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"reshape2"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>And the typical libraries.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">scales</span><span class="p">)</span><span class="w">  </span><span class="c1"># for percentage scales
</span></code></pre>
</div>

<h1 id="way-1">Way 1</h1>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">tips</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">count</span><span class="p">(</span><span class="n">day</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">perc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">tips</span><span class="p">))</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tips2</span><span class="w">

</span><span class="n">ggplot</span><span class="p">(</span><span class="n">tips2</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">perc</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02-02/plot1-1.png" alt="plot of chunk plot1" /></p>

<h1 id="way-2">Way 2</h1>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">day</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">  
  </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">..count..</span><span class="p">)</span><span class="o">/</span><span class="nf">sum</span><span class="p">(</span><span class="n">..count..</span><span class="p">)))</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02-02/unnamed-chunk-1-1.png" alt="plot of chunk unnamed-chunk-1" /></p>

<h1 id="way-3">Way 3</h1>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">myplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">day</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
          </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">..count..</span><span class="p">)</span><span class="o">/</span><span class="nf">sum</span><span class="p">(</span><span class="n">..count..</span><span class="p">)))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
          </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"relative frequencies"</span><span class="p">)</span><span class="w">

</span><span class="n">myplot</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02-02/unnamed-chunk-2-1.png" alt="plot of chunk unnamed-chunk-2" /></p>

<h1 id="way-4">Way 4</h1>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">myplot</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sex</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
          </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">..prop..</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">..x..</span><span class="p">)),</span><span class="w"> </span><span class="n">stat</span><span class="o">=</span><span class="s2">"count"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
          </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
          </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"relative frequencies"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
          </span><span class="n">facet_grid</span><span class="p">(</span><span class="o">~</span><span class="n">sex</span><span class="p">)</span><span class="w">

</span><span class="n">myplot</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02-02/unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3" /></p>

<h1 id="way-5">Way 5</h1>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">ggplot</span><span class="p">(</span><span class="n">tips</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="w"> </span><span class="n">day</span><span class="p">,</span><span class="w">  </span><span class="n">group</span><span class="o">=</span><span class="n">sex</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
    </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">..prop..</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">factor</span><span class="p">(</span><span class="n">..x..</span><span class="p">)),</span><span class="w"> </span><span class="n">stat</span><span class="o">=</span><span class="s2">"count"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_text</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">(</span><span class="n">..prop..</span><span class="p">),</span><span class="w">
                   </span><span class="n">y</span><span class="o">=</span><span class="w"> </span><span class="n">..prop..</span><span class="w"> </span><span class="p">),</span><span class="w"> </span><span class="n">stat</span><span class="o">=</span><span class="w"> </span><span class="s2">"count"</span><span class="p">,</span><span class="w"> </span><span class="n">vjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">-.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">labs</span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Percent"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="s2">"day"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">facet_grid</span><span class="p">(</span><span class="o">~</span><span class="n">sex</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="n">labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scales</span><span class="o">::</span><span class="n">percent</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02-02/unnamed-chunk-4-1.png" alt="plot of chunk unnamed-chunk-4" /></p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-11-02T00:00:00-04:00"><a href="https://sebastiansauer.github.io/figure_sizing_knitr/">November 02, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~5 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/figure_sizing_knitr/" rel="bookmark" title="Different ways to set figure size in RMarkdown" itemprop="url">Different ways to set figure size in RMarkdown</a></h1>
    
  </header>
  <div class="entry-content">
    <p>Markdown is thought as a “lightweight” markup language, hence the name
<code class="highlighter-rouge">markdown</code>. That’s why formatting options are scarce. However, there are some
extensions, for instance brought by RMarkdown.</p>

<p>One point of particular interest is the sizing of figures. Let’s look at some
ways how to size a figure with RMarkdown.</p>

<p>We take some data first:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">data</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w"> 
</span><span class="nf">names</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span><span class="w"> 
</span></code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>##  [1] "mpg"  "cyl"  "disp" "hp"   "drat" "wt"   "qsec" "vs"   "am"   "gear"
## [11] "carb"
</code></pre>
</div>

<p>Not let’s plot.</p>

<h2 id="define-size-in-yaml-header">Define size in YAML header</h2>

<p>We can define the size of figures globally in the YAML part, like this for
example.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gd">--- 
</span>title: "My Document" 
output: html_document: 
fig_width: 6 
fig_height: 4 
<span class="gd">--- 
</span></code></pre>
</div>

<h1 id="defining-figures-size-for-r-plots">Defining figures size for R plots</h1>

<h2 id="define-figure-size-as-global-chunk-option">Define figure size as global chunk option</h2>

<p>As a first R-chunk in your RMD document, define the general chunk settings like
this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>knitr::opts_chunk$set(fig.width=12, fig.height=8) 
</code></pre>
</div>

<h2 id="chunk-options">Chunk options</h2>

<p>We can set the chunk options for each chunk too. With <code class="highlighter-rouge">figh.height</code> and
<code class="highlighter-rouge">fig.width</code> we can define the size. Note that the numbers default to inches as
unit: <code class="highlighter-rouge"><span class="p">{</span><span class="err">r</span><span class="w"> </span><span class="err">fig1,</span><span class="w"> </span><span class="err">fig.height</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">3,</span><span class="w"> </span><span class="err">fig.width</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">5</span><span class="p">}</span></code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">pressure</span><span class="p">)</span><span class="w"> 
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02/figure/fig1-1.png" alt="plot of chunk fig1" /></p>

<p>For a plot of different size, change simple the numbers: <code class="highlighter-rouge"><span class="p">{</span><span class="err">r</span><span class="w"> </span><span class="err">fig2,</span><span class="w"> </span><span class="err">fig.height</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">3,</span><span class="w"> </span><span class="err">fig.width</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">3,</span><span class="w"> </span><span class="err">fig.align</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="nt">"center"</span><span class="err">}</span></code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">pressure</span><span class="p">)</span><span class="w"> 
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02/figure/fig2-1.png" title="plot of chunk fig2" alt="plot of chunk fig2" style="display: block; margin: auto;" /></p>

<p>Alternatively, you may change the aspect ratio of the image: <code class="highlighter-rouge"><span class="p">{</span><span class="err">r</span><span class="w"> </span><span class="err">fig3,</span><span class="w"> </span><span class="err">fig.width</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">5,</span><span class="w"> </span><span class="err">fig.asp</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">.62</span><span class="p">}</span></code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">pressure</span><span class="p">)</span><span class="w"> 
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02/figure/fig3-1.png" alt="plot of chunk fig3" /></p>

<p>Note that the aspect ratio is based on the <code class="highlighter-rouge">fig.width</code> specified by you. See
<a href="http://yihui.name/knitr/options/">here</a>.</p>

<h2 id="different-options-for-different-output-formats">Different options for different output formats</h2>
<p>The options for figure sizing also depend on the output format (HTML vs. Latex, we do not mention Word here). For instance, in Latex percentage is allowed, as is specified on the <a href="http://yihui.name/knitr/options/">options
page</a>: <code class="highlighter-rouge"><span class="p">{</span><span class="err">r</span><span class="w"> </span><span class="err">fig4,</span><span class="w"> </span><span class="err">out.width</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">'40%'</span><span class="p">}</span></code>.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">plot</span><span class="p">(</span><span class="n">pressure</span><span class="p">)</span><span class="w"> 
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-11-02/figure/fig4-1.png" title="plot of chunk fig4" alt="plot of chunk fig4" width="40%" /></p>

<p>But note that it appears to work in HTML too.</p>

<h2 id="differnce-between-figure-size-and-output-size">Differnce between figure size and output size</h2>
<p>We are allowed to specify the
figure size, and secondly the size of the figure as to appear in the output. For
example, if you set the size of a <code class="highlighter-rouge">ggplot</code> figure to large, then fonts etc. will
appear tiny. Better do <em>not</em> scale up <code class="highlighter-rouge">fig.height</code>, but set <code class="highlighter-rouge">out.width</code>
accordingly, eg., like this <code class="highlighter-rouge">out.width = "70%"</code>.</p>

<h1 id="using-pandocs-markdown-for-figure-sizing">Using Pandoc’s Markdown for figure sizing</h1>
<p>Alternatively, instead of using R
for plotting, you can just load an image. Of course, it is possible to just use
markdown for that: <code class="highlighter-rouge">![](path/to/figure/figure.png)</code>.</p>

<p>Change the figure size like this: <code class="highlighter-rouge">![](file.jpg){ width=50% }</code>. Note that no
space are allowed around the <code class="highlighter-rouge">=</code> (equal sign), and the curly brace <code class="highlighter-rouge"><span class="p">{</span></code> needs to
come right after the <code class="highlighter-rouge">)</code> brace; no space allowed.</p>

<p>Similarly, with path to local folder:</p>

<p><code class="highlighter-rouge">![](../../sebastiansauer.github.io/images/2016-10-17/unnamed-chunk-5-1.png.png)</code></p>

<p><img src="https://sebastiansauer.github.io/images/2016-10-17/unnamed-chunk-5-1.png" alt="" />{
width=20% }</p>

<p>Centering is not really part of markdown. But there are some workarounds. See:</p>

<center>
![](https://sebastiansauer.github.io/images/2016-10-17/unnamed-chunk-5-1.png){
width=20% }
</center>

<p>I used this code:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;center&gt;
![](https://sebastiansauer.github.io/images/2016-10-17/unnamed-chunk-5-1.png){
width=20% }
&lt;/center&gt;
</code></pre>
</div>

<h1 id="using-the-knitr-function-includegraphics">Using the <code class="highlighter-rouge">knitr</code> function <code class="highlighter-rouge">include_graphics</code></h1>

<p>We can use the knitr function <code class="highlighter-rouge">include_graphics</code> which is convenient, as it takes care for the different output formats and provides some more features (see
<a href="https://rforge.net/doc/packages/knitr/include_graphics.html">here</a> the help
file).</p>

<p><img src="https://sebastiansauer.github.io/images/affairs.png" title="plot of chunk fig5" alt="plot of chunk fig5" width="50%" style="display: block; margin: auto;" /></p>

<p>Note that online sources are allowed. Don`t forget to load knitr previously.</p>

<p><img src="https://sebastiansauer.github.io/images/2016-10-17/unnamed-chunk-5-1.png" title="plot of chunk }{r fig6" alt="plot of chunk }{r fig6" width="50%" style="display: block; margin: auto;" /></p>

<h1 id="if-all-fails">If all fails</h1>
<p>Just resize the image with your favorite photo/image manager such as Gimp, Photoshop, Preview App etc.</p>

<h1 id="further-reading-finde-good-advice-on-yihuis-option-page">Further reading Finde good advice on Yihui’s option page</h1>
<p><a href="http://yihui.name/knitr/options/">here</a>. The Book “R for Data Science” by
Hadley Wickham and Garrett Grolemund (read <a href="http://r4ds.had.co.nz">here</a>) is a
great resource too. Read chapter 28 on diagrams
<a href="http://r4ds.had.co.nz/graphics-for-communication.html#saving-your-plots">here</a>.
Pandoc’s user guide has some helpful comments on figures sizing with <a href="http://pandoc.org/MANUAL.html#images">Pandoc’s
markdown </a>.</p>


  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry">
  <header>
    
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2016-10-17T00:00:00-04:00"><a href="https://sebastiansauer.github.io/CLES-plot/">October 17, 2016</a></time></span><span class="author vcard"><span class="fn"><a href="https://sebastiansauer.github.io/about/" title="About Sebastian Sauer">Sebastian Sauer</a></span></span>
      
      <span class="entry-reading-time">
        <i class="fa fa-clock-o"></i>
        
Reading time ~9 minutes
      </span><!-- /.entry-reading-time -->
      
    </div><!-- /.entry-meta -->
    
      <h1 class="entry-title"><a href="https://sebastiansauer.github.io/CLES-plot/" rel="bookmark" title="CLES plot" itemprop="url">CLES plot</a></h1>
    
  </header>
  <div class="entry-content">
    <p>In data analysis, we often ask “Do these two groups differ in the outcome variable”? Asking this question, a tacit assumption may be that the grouping variable is the cause of the difference in the outcome variable. For example, assume the two groups are “treatment group” and “control group”, and the outcome variable is “pain reduction”.</p>

<p>A typical approach would be to report the strenght of the difference by help of Cohen’s d. Even better (probably, but this atttitude is not undebated) is to report confidence intervals for d.</p>

<p>Although this approach is widely used, I think it is not ideal. One reason is that we (may) have tacitly changed our hypothesis. We are <em>not</em> asking anymore “Do individuals between the two groups differ?” but we ask now “Do the mean values differ?”, which is different. Although we are used to this approach, there are problems: Often, our theories do <em>not</em> state that e.g., some pill will change the mean of a group. Rather, the theory will (quite rightly, in principle) suggest that some chemical compound in <em>an organism</em> will change some molecules, thereby some cell metabolism products, and finally bringing about some biological and/or psychological change (to the better). This is complete different a theory. And the last theory makes sense (potentially) from a biological and logical perspective. The former does <em>not</em> make any sense. How can some chemical affect some group averages, some “average organism” which does not exist in reality? If we agre with that notion we would be forced, I believe, not to compare means.</p>

<p>But what can we do instead? In fact, some new methods have been proposed; for example James Grice developed what he has dubbed <a href="http://store.elsevier.com/Observation-Oriented-Modeling/James-Grice/isbn-9780123851949/">Observation Oriented Moeling</a>. But maybe an easy, first step alternative could be using the “common language effect size” (CLES). CLES simply states “given the observed effect, how likely is it that if we draw two individuals, one from each of the two groups, that the individual from the experimental group will have a higher value in the variable of interest?” (see <a href="http://core.ecu.edu/psyc/wuenschk/docs30/CL.pdf">here</a>).</p>

<p>The value of CLEs is observational, not a hypothetical parameter. It is quite straight-forward man-on-the-street logic. For example: “Draw 100 pairs from the two groups; in 83 cases the experimental group person will a higher value”. That makes sense from an observation or individual organism point of view.</p>

<p>Practically, there are <a href="https://cran.r-project.org/web/packages/compute.es/compute.es.pdf">R packages out there</a> which help us computing CLES (or at least one package). The details of the computation are beyond the scope of this article; see <a href="http://core.ecu.edu/psyc/wuenschk/docs30/CL.pdf">here</a> for mathematical details.</p>

<p>Rather, we will build a nice plot for displaying a number of CLES differences between two groups.</p>

<p>First, let’s get some data, and load the needed packages.</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># library(readr)
</span><span class="n">extra_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"https://raw.github.com/sebastiansauer/Daten_Unterricht/master/extra.csv"</span><span class="w">

</span><span class="n">extra_df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">extra_file</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<p>This dataset <code class="highlighter-rouge">extra</code> comprises answers to a survey tapping into extraversion as a psychometric variable plus some related behavior (e.g., binge drinking). The real-word details are not so much of interest here.</p>

<p>So, let’s pick all numeric variables plus one grouping variable (say, sex):</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># library(dplyr)
</span><span class="n">extra_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">na.omit</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select_if</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">names</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">extra_num_vars</span><span class="w">
</span></code></pre>
</div>

<p>First, we compute a t-test for each numeric variable (using our grouping variable “sex”):</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># library(purrr)
</span><span class="n">extra_df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">one_of</span><span class="p">(</span><span class="n">extra_num_vars</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="c1"># na.omit() %&gt;% 
</span><span class="w">  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">t.test</span><span class="p">(</span><span class="n">.</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">extra_df</span><span class="o">$</span><span class="n">Geschlecht</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">compute.es</span><span class="o">::</span><span class="n">tes</span><span class="p">(</span><span class="n">.</span><span class="o">$</span><span class="n">statistic</span><span class="p">,</span><span class="w">
                       </span><span class="n">n</span><span class="m">.1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">dplyr</span><span class="o">::</span><span class="n">filter</span><span class="p">(</span><span class="n">extra_df</span><span class="p">,</span><span class="w"> </span><span class="n">Geschlecht</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Frau"</span><span class="p">)),</span><span class="w">
                       </span><span class="n">n</span><span class="m">.2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nrow</span><span class="p">(</span><span class="n">dplyr</span><span class="o">::</span><span class="n">filter</span><span class="p">(</span><span class="n">extra_df</span><span class="p">,</span><span class="w"> </span><span class="n">Geschlecht</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Mann"</span><span class="p">))))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">map</span><span class="p">(</span><span class="o">~</span><span class="n">do.call</span><span class="p">(</span><span class="n">rbind</span><span class="p">,</span><span class="w"> </span><span class="n">.</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">as.data.frame</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">t</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">data.frame</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rownames_to_column</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">rename</span><span class="p">(</span><span class="n">outcomes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rowname</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> 
  </span><span class="n">extra_effsize</span><span class="w">
</span></code></pre>
</div>

<hr />

<p>Note: output hidden, tl;dr.</p>

<hr />

<p>Puh, that’s a bit confusing. So, what did we do?</p>

<ol>
  <li>We selected the numeric variables of the data frame; here <code class="highlighter-rouge">one_of</code> comes handy. This function gets the column names of a data frame as input, and allows to select all of them in the <code class="highlighter-rouge">select</code> function.</li>
  <li>We mapped a t-test to each of those columns, where <code class="highlighter-rouge">extra_df$Geschlecht</code> was the grouping variable. Note that the dot <code class="highlighter-rouge">.</code> is used as a shortcut for the lefthand side of the equation, ie., whatever is handed over by the pipe ` %&gt;% ` in the previous line/step.</li>
  <li>Next, we computed the effect size using <code class="highlighter-rouge">tes</code> from package <code class="highlighter-rouge">compute.es</code>.</li>
  <li>For each variable submitted to a t-test, bind the results rowwise. Each t-test gives back a list of results. We want to bind those results in a list. As we have several list elements (for each t-test), we can use <code class="highlighter-rouge">do.call</code> to bind that all together in one go.</li>
  <li>Convert to data frame.</li>
  <li>Better turn matrix by 90° using <code class="highlighter-rouge">t</code>.</li>
  <li>As <code class="highlighter-rouge">t</code> gives back a matrix, we need to convert to data frame again.</li>
  <li>Rownames should be their own column with an appropriate name (<code class="highlighter-rouge">outcomes</code>).</li>
  <li>Save that in an own data frame.</li>
</ol>

<p>And compute the differences in CLES, and plot it:</p>

<div class="language-r highlighter-rouge"><pre class="highlight"><code><span class="c1"># library(ggplot2)
</span><span class="n">extra_effsize</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">outcomes</span><span class="p">,</span><span class="w"> </span><span class="n">cl.d</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">sign</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">cl.d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="s2">"+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"-"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reorder</span><span class="p">(</span><span class="n">outcomes</span><span class="p">,</span><span class="w"> </span><span class="n">cl.d</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cl.d</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sign</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">geom_hline</span><span class="p">(</span><span class="n">yintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">geom_point</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sign</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">coord_flip</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">ylab</span><span class="p">(</span><span class="s2">"effect size (Common Language Effect Size)"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
  </span><span class="n">xlab</span><span class="p">(</span><span class="s2">"outcome variables"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> 
  </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"CLES plot"</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">CLES_plot</span><span class="w">


</span><span class="n">CLES_plot</span><span class="w">
</span></code></pre>
</div>

<p><img src="https://sebastiansauer.github.io/images/2016-10-17/unnamed-chunk-5-1.png" alt="" /></p>

<p>The code above in more detail:</p>

<ol>
  <li>select columns <code class="highlighter-rouge">outcomes</code> and <code class="highlighter-rouge">cl.d</code>; note that <code class="highlighter-rouge">cl.d</code> stands for CLES (here: Common Language Cohen’s d, as CLES is derived from Cohen’s d).</li>
  <li>Compute variable to tell in which direction the difference points, ie., whether it is greater or smaller than 50%, where 50% refers to ignorance towards the direction of difference.</li>
  <li>Well, now plot, but sort the outcomes by their CLES value; for the purpose of sorting we use <code class="highlighter-rouge">reorder</code>.</li>
  <li>Flip the axes because it is more beautiful here.</li>
</ol>

  </div><!-- /.entry-content -->
</article><!-- /.hentry -->



<div class="pagination">
  <ul class="inline-list">
    
    
      
        <li><a href="https://sebastiansauer.github.io" class="btn">Previous</a></li>
      
    

    
    
      <li><a href="https://sebastiansauer.github.io">1</a></li>
    

    
    

    
    
    

    
      
        <li><strong class="current-page">2</strong></li>
      
    
      
        
        
        
        <li><a href="https://sebastiansauer.github.io/page3/">3</a></li>
      
    
      
        
        
        
        <li><a href="https://sebastiansauer.github.io/page4/">4</a></li>
      
    

    
    
      <li>…</li>
    

    
      <li><a href="https://sebastiansauer.github.io/page9/">9</a></li>
    

    
    
      <li><a href="https://sebastiansauer.github.io/page3/" class="btn">Next</a></li>
    
  </ul>
</div>

</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2016 Sebastian Sauer. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/hpstr-jekyll-theme/" rel="nofollow">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://sebastiansauer.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://sebastiansauer.github.io/assets/js/scripts.min.js"></script>

<script type="text/javascript"
    src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



          

</body>
</html>